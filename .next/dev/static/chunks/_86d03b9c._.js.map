{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/dskal/.vscode/GatorGreen/hooks/useLocation.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\ntype Location = {\r\n  latitude: number;\r\n  longitude: number;\r\n};\r\n\r\nexport function useLocation() {\r\n  const [location, setLocation] = useState<Location | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!navigator.geolocation) {\r\n      setError(\"Geolocation is not supported by your browser.\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      (pos) => {\r\n        setLocation({\r\n          latitude: pos.coords.latitude,\r\n          longitude: pos.coords.longitude,\r\n        });\r\n        setLoading(false);\r\n      },\r\n      (err) => {\r\n        setError(err.message);\r\n        setLoading(false);\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  return { location, error, loading };\r\n}\r\n"],"names":["useEffect","useState","Location","latitude","longitude","useLocation","location","setLocation","error","setError","loading","setLoading","navigator","geolocation","getCurrentPosition","pos","coords","err","message"],"mappings":";;;;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;;;AAOpC;;IACL,MAAM,CAACK,QAAQ,EAAEC,WAAW,CAAC,OAAGN,yKAAQ,CAACC,CAAiB,IAAI,CAAC,EAAd,GAAG,IAAI,CAAC;IACzD,MAAM,CAACM,KAAK,EAAEC,QAAQ,CAAC,OAAGR,yKAAQ,CAAC,CAAe,IAAI,CAAb,AAAc,GAAX,IAAI,CAAC;IACjD,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,OAAGV,yKAAQ,EAAC,IAAI,CAAC;QAE5CD,0KAAS;iCAAC,MAAM;YACd,IAAI,CAACY,SAAS,CAACC,WAAW,EAAE;gBAC1BJ,QAAQ,CAAC,+CAA+C,CAAC;gBACzDE,UAAU,CAAC,KAAK,CAAC;gBACjB;YACF;YAEAC,SAAS,CAACC,WAAW,CAACC,kBAAkB;0CACrCC,GAAG,IAAK;oBACPR,WAAW,CAAC;wBACVJ,QAAQ,EAAEY,GAAG,CAACC,MAAM,CAACb,QAAQ;wBAC7BC,SAAS,EAAEW,GAAG,CAACC,MAAM,CAACZ,SAAAA;oBACxB,CAAC,CAAC;oBACFO,UAAU,CAAC,KAAK,CAAC;gBACnB,CAAC;;yCACAM,GAAG,IAAK;oBACPR,QAAQ,CAACQ,GAAG,CAACC,OAAO,CAAC;oBACrBP,UAAU,CAAC,KAAK,CAAC;gBACnB,CACF,CAAC;;QACH,CAAC;gCAAE,EAAE,CAAC;IAEN,OAAO;QAAEL,QAAQ;QAAEE,KAAK;QAAEE;IAAQ,CAAC;AACrC;GA5BgBL,WAAWA,CAAA,EAAG","ignoreList":[]}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["C:/Users/dskal/.vscode/GatorGreen/components/Map.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport type * as L from \"leaflet\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport {\r\n    MapContainer,\r\n    Marker,\r\n    Popup,\r\n    TileLayer,\r\n    useMap,\r\n    useMapEvents,\r\n} from \"react-leaflet\";\r\nimport { useLocation } from \"../hooks/useLocation\";\r\n\r\n// Leaflet icon setup is performed client-side via dynamic import in an effect below.\r\n\r\ninterface Location {\r\n  name: string;\r\n  lat: number;\r\n  lng: number;\r\n}\r\n\r\n\r\nfunction MapUpdater({ location, onMapClick }: { location: Location | null; onMapClick: (e: L.LeafletMouseEvent) => void }) {\r\n  const map = useMap();\r\n\r\n  useMapEvents({\r\n    click: onMapClick,\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (location) {\r\n      map.setView([location.lat, location.lng], 13);\r\n    }\r\n  }, [location, map]);\r\n\r\n  return null;\r\n}\r\n\r\nexport function MapComponent() {\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [selectedLocation, setSelectedLocation] = useState<Location | null>(null);\r\n  const [markers, setMarkers] = useState<Location[]>([\r\n    { name: \"San Francisco\", lat: 37.7749, lng: -122.4194 },\r\n  ]);\r\n  const [isLeafletReady, setIsLeafletReady] = useState(false);\r\n  const mapRef = useRef(null);\r\n  const { location, error: locationError, loading: locationLoading } = useLocation();\r\n\r\n  // Client-only Leaflet icon fix to avoid SSR 'window is not defined'.\r\n  React.useEffect(() => {\r\n    let isMounted = true;\r\n    (async () => {\r\n      const leaflet = await import(\"leaflet\");\r\n      if (!isMounted) return;\r\n      delete (leaflet.Icon.Default.prototype as any)._getIconUrl;\r\n      leaflet.Icon.Default.mergeOptions({\r\n        iconRetinaUrl:\r\n          \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png\",\r\n        iconUrl:\r\n          \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png\",\r\n        shadowUrl:\r\n          \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png\",\r\n      });\r\n      setIsLeafletReady(true);\r\n    })();\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  const handleSearch = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!searchQuery.trim()) return;\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\r\n          searchQuery\r\n        )}`\r\n      );\r\n      const results = await response.json();\r\n\r\n      if (results.length > 0) {\r\n        const result = results[0];\r\n        const newLocation: Location = {\r\n          name: result.display_name,\r\n          lat: parseFloat(result.lat),\r\n          lng: parseFloat(result.lon),\r\n        };\r\n        setSelectedLocation(newLocation);\r\n        setMarkers([newLocation]);\r\n      } else {\r\n        alert(\"Location not found. Try another search.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Search error:\", error);\r\n      alert(\"Error searching for location\");\r\n    }\r\n  };\r\n\r\n  const handleMapClick = (e: L.LeafletMouseEvent) => {\r\n    const newLocation: Location = {\r\n      name: `Lat: ${e.latlng.lat.toFixed(4)}, Lng: ${e.latlng.lng.toFixed(4)}`,\r\n      lat: e.latlng.lat,\r\n      lng: e.latlng.lng,\r\n    };\r\n    setMarkers([newLocation]);\r\n    setSelectedLocation(newLocation);\r\n  };\r\n\r\n  const handleUseMyLocation = () => {\r\n    if (!location) return;\r\n    const newLocation: Location = {\r\n      name: \"My Location\",\r\n      lat: location.latitude,\r\n      lng: location.longitude,\r\n    };\r\n    setMarkers([newLocation]);\r\n    setSelectedLocation(newLocation);\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full h-screen flex flex-col\">\r\n      {/* Search Bar */}\r\n      <div className=\"bg-white shadow-md p-4 z-10 flex-shrink-0\">\r\n        <form onSubmit={handleSearch} className=\"flex gap-2\">\r\n          <input\r\n            type=\"text\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            placeholder=\"Search for a destination...\"\r\n            className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500\"\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            className=\"px-6 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition font-semibold\"\r\n          >\r\n            Search\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleUseMyLocation}\r\n            disabled={locationLoading || !!locationError}\r\n            className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition font-semibold disabled:opacity-50\"\r\n          >\r\n            Use My Location\r\n          </button>\r\n        </form>\r\n        {locationError && (\r\n          <p className=\"text-xs text-red-600 mt-2\">{locationError}</p>\r\n        )}\r\n        {selectedLocation && (\r\n          <p className=\"text-sm text-gray-600 mt-2\">\r\n            üìç {selectedLocation.name}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Map Container */}\r\n      <div style={{ height: \"calc(100vh - 120px)\", width: \"100%\" }}>\r\n        {!isLeafletReady ? (\r\n          <div className=\"flex items-center justify-center w-full h-full bg-gray-100\">\r\n            <div className=\"text-gray-600 text-xl\">Loading map...</div>\r\n          </div>\r\n        ) : (\r\n          <MapContainer\r\n            center={[37.7749, -122.4194]}\r\n            zoom={4}\r\n            scrollWheelZoom={true}\r\n            style={{ height: \"100%\", width: \"100%\" }}\r\n            ref={mapRef}\r\n          >\r\n            <TileLayer\r\n              attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            />\r\n\r\n            {markers.map((marker, idx) => (\r\n              <Marker key={idx} position={[marker.lat, marker.lng]}>\r\n                <Popup>\r\n                  <div className=\"text-sm\">\r\n                    <p className=\"font-semibold\">{marker.name}</p>\r\n                    <p className=\"text-gray-600\">\r\n                      Lat: {marker.lat.toFixed(4)}, Lng: {marker.lng.toFixed(4)}\r\n                    </p>\r\n                  </div>\r\n                </Popup>\r\n              </Marker>\r\n            ))}\r\n\r\n            <MapUpdater location={selectedLocation} onMapClick={handleMapClick} />\r\n          </MapContainer>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["L","React","useRef","useState","MapContainer","Marker","Popup","TileLayer","useMap","useMapEvents","useLocation","Location","name","lat","lng","MapUpdater","location","onMapClick","e","LeafletMouseEvent","map","click","useEffect","setView","MapComponent","searchQuery","setSearchQuery","selectedLocation","setSelectedLocation","markers","setMarkers","isLeafletReady","setIsLeafletReady","mapRef","error","locationError","loading","locationLoading","isMounted","leaflet","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","handleSearch","FormEvent","preventDefault","trim","response","fetch","encodeURIComponent","results","json","length","result","newLocation","display_name","parseFloat","lon","alert","console","handleMapClick","latlng","toFixed","handleUseMyLocation","latitude","longitude","target","value","height","width","marker","idx"],"mappings":"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","ignoreList":[]}}]
}